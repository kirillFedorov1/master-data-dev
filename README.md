# Учебный проект *master-data-dev*. Разработка для мастер данных
## Цели
- Для администратора: возможность ведения учёта сотрудников c заявлениями и отпусками;
- Для бухгалтера: сокращение затрат на расчёт премий;
- Для сотрудников: 
  - возможность подтвердить или отклонить расчеты зарплат;
  - возможность автоматической генерации заявлений.
## Реализация
- Создание справочников, настройка прав и интерфейса master data management;
- Создание проверок на логическую целостность данных при выполнении операций над справочниками;
- Разработка процедуры вычисления зарплат и создание регулярной задачи в master data management;
- Разработка возможности для сотрудника подтвердить или отклонить расчеты зарплат;
- Разработка автоматического подтверждения зарплат за прошлый месяц, создание email уведомлений для сотрудников;
- Разработка возможности автоматической генерации заявлений для сотрудников с помощью инструментария DocGen;
- Разработка возможности загружать данные по премиям из внешнего источника.
## Структура репозитория
  - *api/* - слой настроек api;
  - *data/* - слой настроек master data management;
  - *db/* - слой бд, скрипты обновлений и объектов;
  - *package.yaml* - параметры для сборки проекта.
## Описание объектов
- Функции:
  - *udf_Security_Bill* - функция безопасности, логика определения прав доступа;
- Процедуры:
  - *usp_AfterSaveEmployee*, *usp_BeforeDeleteEmployee*, *usp_BeforeSaveEmployee*, *usp_BeforeSavePosition*, *usp_BeforeSaveSalaryBonus* - проверки на логическую целостность данных, автоматическое заполнение атрибутов;
  - *usp_CalculateSalary* - расчет зарплаты сотрудника;
  - *usp_InsertMonthPeriod* - заполнение справочника с месяцами;
  - *usp_LoadBonusData* - загрузка информации о премиях из внешнего файла;
- Триггеры:
  - *tr_Bill_Insert* - заполнение статуса для новых зарплатных ведомостей;
- Представления:
  - *vw_BillNotification* - данные для уведомлений о расчете зарплаты;
  - *vw_IsWorking* - статус сотрудника (работает/не работает);
  - *vw_IsVacation* - статус сотрудника (в отпуске/не в отпуске);
- Update-скрипты базы данных:
  - *CreateStructure* - создание структур;
  - *ChangeStructure* - изменение структур;
  - *FillDictionaries* - обновление системных справочников;
  - *UpdateRows* - обновление пользовательских справочников;
  - *Permissions* - настройка прав доступа;
  - *ListView*, *NamedFilter* - настройки для master data management;
  - *Job* - настройки регулярных задач master data management;
  - *DocGen* - настройки инструмента DocGen;
  - *Statuses* - настройки статусной модели.
- Настройки master data management:
  - *Object.yaml* - настройки объектов в mdm;
  - *Navigation.yaml* - настройки интерфейса навигации в mdm;
  - *List.yaml* - настройки списочных форм (отображение справочников);
  - *Layout.yaml* - настройки карточки для записи в справочнике;
  - *Template.yaml* - шаблон email уведомления об авторасчете зарплаты;
  - *etl.Script.yaml* - etl скрипт для загрузки информации о премиях из внешнего источника.
